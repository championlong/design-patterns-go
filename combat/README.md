# 设计原则
## 应对复杂项目开发
### 设计原则上
* 封装与抽象：
隔离底层设备访问的复杂性、统一的访问方式能够简化上层代码的编写，并且代码更容易复用。
* 分层与模块化：
把容易复用、跟具体业务关系不大的代码，尽量下沉到下层，把容易变动、跟具体业务强相关的代码，尽量上移到上层。
* 基于接口通信：
在设计模块（module）或者层（layer）要暴露的接口的时候，我们要学会隐藏实现，接口从命名到定义都要抽象一些，尽量少涉及具体的实现细节。
* 高内聚，松耦合：
内聚性好、耦合少的代码，能让我们在修改或者阅读代码的时候，聚集到在一个小范围的模块或者类中，不需要了解太多其他模块或类的代码
* 为扩展而设计：
满足开闭原则，做到代码可扩展
将可变部分封装起来，隔离变化，提供抽象化的不可变接口，供上层系统使用。
* KISS首要原则：
可读性好，即便扩展性不好，顶多就是多花点时间、多改动几行代码的事情。
* 最小惊奇原则：
遵守开发规范
### 行为做法上
* 吹毛求疵般地执行编码规范
* 编写高质量的单元测试
* Code Review 
  * 三人行必有我师
  * 能摒弃“个人英雄主义”
  * 能有效提高代码可读性
  * 是技术传帮带的有效途径
  * 保证代码不止一个人熟悉
  * 能打造良好的技术氛围
  * 是一种技术沟通方式
  * 能提高团队的自律性
* 开发未动、文档先行
* 持续重构
* 对项目与团队进行拆分
## Spring设计思想
* 约定优于配置：简化配置一般来讲，有两种方法，一种是基于注解，另一种是基于约定
  * 通过约定的代码结构或者命名来减少配置。
* 低侵入、松耦合：
  * Spring提供的IOC容器，在不需要Bean继承任何父类或者实现任何接口的情况下，仅仅通过配置，就能将它们纳入进Spring的管理中。
  * 基于AOP这种开发模式，将非业务代码集中放到切面中，删除、修改的成本就变得很低了。
* 模块化、轻量级：
  * 每个模块都只负责一个相对独立的功能。模块之间关系，仅有上层对下层的依赖关系，而同层之间以及下层对上层，几乎没有依赖和耦合。
  * 开发者可以有选择地引入某几个模块，而不会因为需要一个小的功能，就被强迫引入整个Spring框架。
* 再封装、再抽象：对市面上主流的中间件、系统的访问类库，做了进一步的封装和抽象，提供了更高层次、更统一的访问接口。

限流框架、接口幂等框架、代码层面灰度发布组件等
* 易用性: 希望限流规则的配置、编程接口的使用都很简单。能提供各种不同的限流算法
* 扩展性、灵活性方面：希望能够灵活地扩展各种限流算法。支持不同格式（JSON、YAML、XML等格式）、不同数据源（本地文件配置或Zookeeper集中配置等）的限流规则的配置方式
* 性能方面：尽可能减少对接口请求本身响应时间的影响。
* 容错性方面：要有高度的容错性

常见的限流算法有：固定时间窗口限流算法、滑动时间窗口限流算法、令牌桶限流算法、漏桶限流算法。
限流模式分为两种：单机限流和分布式限流。

